<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee System</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1>Employee System</h1>
    <table>
        <thead>
            <tr>
                <th>Company</th>
                <th>Employee</th>
                <th>Nationality</th>
                <th>Document</th>
                <th>Issue Date</th>
                <th>Expiry Date</th>
                <th>Days Remaining</th>
            </tr>
        </thead>
        <tbody>
            <% companies.forEach(company => { %>
                <% company.employees.forEach(emp => { %>
                    <% emp.documents.forEach(doc => { %>
                        <tr>
                            <td><%= company.companyName %></td>
                            <td><%= emp.name %></td>
                            <td><%= emp.nationality %></td>
                            <td><%= doc.type %></td>
                            <td><%= doc.issueDate %></td>
                            <td><%= doc.expiryDate %></td>
                            <td>
                                <% 
                                    const today = new Date();
                                    const expiry = new Date(doc.expiryDate);
                                    const diffTime = expiry - today;
                                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                                %>
                                <%= diffDays %>
                            </td>
                        </tr>
                    <% }) %>
                <% }) %>
            <% }) %>
        </tbody>
    </table>
</body>
</html>
